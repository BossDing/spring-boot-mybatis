<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.example.springbootmybatis.mapper.ProvinceMapper">
    <resultMap id="provinceMap" type="Province">
        <id property="id" column="id"/>
        <result property="provincecode" column="provincecode"/>
        <result property="provincename" column="provincename"/>
    </resultMap>
    <resultMap id="provinceCityMap" extends="provinceMap" type="Province">
        <id property="id" column="id"/>
        <result property="provincecode" column="provincecode"/>
        <result property="provincename" column="provincename"/>
        <collection property="cities" column="p_id=id"
                    select="com.example.springbootmybatis.mapper.CityMapper.getCitiesByProvinceId">
        </collection>
    </resultMap>
    <select id="getProvinceById"  resultMap="provinceMap">
        select id, provincecode, provincename
          from province
         where id = #{id}
    </select>
    <select id="getAllProvinces"  resultMap="provinceCityMap">
        select id, provincecode, provincename
          from province
    </select>
</mapper>